@page "/"
@inject NavigationManager Navigation
@inject AuthenticationStateProvider AuthStateProvider

<p>Loading...</p>

@code {
    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (!firstRender)
        {
            return;
        }

        var state = await AuthStateProvider.GetAuthenticationStateAsync();
        var isAuthenticated = state.User.Identity?.IsAuthenticated == true;
        Navigation.NavigateTo(isAuthenticated ? "/home" : "/auth/login", replace: true);
    }
}
